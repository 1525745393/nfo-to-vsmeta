# vsmeta 元数据生成工具（Python版）
版本：v1.5
适配平台：群晖 DSM / Windows / Linux
作者：OpenAI 辅助开发优化

=========================
一、功能简介
=========================
本工具可自动为本地 JAV 视频生成 .vsmeta 文件，供 Emby/Jellyfin 识别影片信息与封面。

主要功能：
- 多线程快速处理大批量影片
- 支持自动跳过已有 .vsmeta 的文件
- 支持自动重命名视频（可选，支持番号/标题格式）
- 支持输出到自定义缓存目录（NAS 优化）
- 支持失败重试与详细日志记录（含失败原因）
- 支持 config.json 自定义配置（含详细注释）
- 兼容群晖 DSM（自动识别 Python 路径或手动指定）

=========================
二、使用说明
=========================

1. 编辑 config.json 配置文件：
- 填写待扫描目录（可多个）
- 设置线程数、代理、重命名规则等
- 所有字段均附带 #注释 + 示例 + 建议修改值

2. 运行脚本：
群晖：
  /usr/local/bin/python3 main.py

Windows/Linux：
  python3 main.py

3. 命令行可选参数（可组合使用）：
  --only-missing      仅转换尚未生成 .vsmeta 的文件
  --overwrite         强制覆盖已有 .vsmeta（默认跳过）
  --rename            启用视频自动重命名
  --root 路径         指定扫描目录（可用多个）
  --root-file file.txt 从文件读取扫描路径，每行一个路径

=========================
三、使用建议
=========================

- 群晖建议线程数设为 4～6，避免资源占满
- 建议设定专用输出缓存目录，提升 Emby 扫描性能
- 自动重命名建议启用“跳过已规范命名”避免重复处理

=========================
四、常见问题
=========================

Q1：运行无响应？
A1：确认网络代理或 Clash 可用。群晖须使用完整 Python 路径。

Q2：未识别到视频？
A2：请确保视频文件名或文件夹中包含番号，并按推荐结构命名。

Q3：失败日志在哪查看？
A3：logs/ 目录中自动生成日志文件，含失败影片及原因汇总。

=========================
五、联系方式
=========================

有问题或建议请通过 GitHub 或群晖论坛留言反馈。