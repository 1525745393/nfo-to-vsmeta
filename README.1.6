VSmeta 元数据生成工具 v1.5 更新日志
====================================

【新增功能】
-------------
1. 支持可选的视频重命名功能（rename_video）
   - 可保留原始文件（rename_keep_original）
   - 可跳过已规范命名的文件（rename_skip_well_named）

2. 自动识别 Python 路径（兼容群晖 DSM 系统）
   - 支持自动查找常见路径（如 /usr/local/bin/python3）
   - 可手动指定 python_path

3. 支持将 .vsmeta 输出至指定目录（output_vsmeta_dir）
   - 可集中存储元数据，便于 Emby/Jellyfin 接入

【优化改进】
-------------
1. 所有 config.json 配置项添加详细操作注释（# 建议 + 更改后果）
   - 支持一键复制、易于理解与修改

2. 日志系统优化
   - 每次执行生成时间戳日志文件
   - 输出成功、失败、统计信息

3. 完善多线程配置说明
   - 默认线程数为 4，可按 NAS 性能调整

【开发中功能（预告）】
----------------------
1. 多视频格式支持：将新增对 .mov、.wmv 等格式识别
2. 自定义重命名模板（如：{title}_{id}.mp4）
3. Dry-run 模拟运行模式
4. JSON 格式日志输出（便于日志分析与集成）
5. 配置文件字段合法性验证（schema 校验）
6. GUI 和 Web UI 计划版本：v2.0+

【配置示例】
-------------
- 配置文件路径默认：`config.json`
- 支持的主键字段：
  - scan_root
  - output_vsmeta_dir
  - rename_video
  - thread_count
  - skip_existing
  - log_dir
  - python_path 等

【兼容性建议】
----------------
- 群晖 DSM：建议使用 Python 3.9+，已适配 /usr/local/bin/python3 路径
- Emby/Jellyfin：建议启用独立 vsmeta 输出目录，避免与原文件混杂

文档更新时间：2025-05-06

## v1.5

- 新增功能：影片文件自动重命名（可选）
  - 支持按标题或番号规则自动重命名视频文件，便于媒体整理
  - 可选项：是否保留原文件名作为备份
  - 可选项：是否跳过已命名规范的文件
  - 关联文件（字幕、封面等）支持独立规则重命名
  - 可通过 config.json 配置开启，默认关闭

- 新增功能：读取 config.json 时进行参数校验与自动补全
  - 若配置缺失则自动填入默认值并输出警告提示
  - 所有参数支持详细注释，说明建议和修改后果
  - 可复制修改项已在注释中明确标记，便于调整

- 新增功能：支持 .vsmeta 输出到自定义目录
  - 用于将元数据与视频分离，例如输出至 NAS 缓存盘
  - config.json 中可设置输出路径，支持相对与绝对路径

- 群晖优化：
  - 自动兼容常见 DSM 的 Python 路径（如 /usr/local/bin/python3）
  - 可在 config.json 手动指定 Python 路径，增强适配性

- 日志功能增强：
  - 每次执行生成独立的时间戳命名日志文件
  - 支持统计总处理数、成功数、失败数
  - 每个视频处理失败时记录详细失败原因
  - 最终输出日志摘要报告

- 命令行参数增强：
  - --only-missing：仅处理缺失的 .vsmeta 文件
  - --overwrite：控制是否覆盖已有的 .vsmeta 文件（默认不覆盖）
  - --root：支持多个目录输入
  - --root-file：支持从文件读取扫描路径列表

- 配置说明增强：
  - 所有 config.json 配置项统一添加详细操作注释
  - 每项注释包含“推荐值、修改方法及后果说明”
  - 所有可更改项后附“可复制切换代码”，提高修改效率
VSmeta 视频元数据生成工具 v1.6

【简介】
用于将已有 .nfo 元数据转为 Synology Video Station 使用的 .vsmeta 格式，支持多格式视频，重命名、日志生成、干预选项等。

【运行方式】
python3 vsmeta_main_v1.6.py --config config.json

【功能亮点】
- 支持多线程批处理
- 可选重命名规则及保留副本
- 可自定义输出目录（适配 NAS 缓存盘）
- 支持 dry-run 预演模式
- 群晖兼容优化：自动检测 Python 路径
- JSON 日志结构便于集成

【推荐环境】
- Python 3.8+
- 群晖 DSM 7+
- 推荐与 Emby/Jellyfin 搭配

【目录结构】
- scripts/：主程序
- docs/：说明与 changelog
- config.json：参数配置
- logs/：执行日志目录

更多问题请联系作者或社区支持。